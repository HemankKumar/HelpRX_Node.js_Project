<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Needy Dashboard</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>



    <style>
        body {
            background: linear-gradient(135deg, #fdfbfb, #ebedee);
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
        }

        /* Dark Mode */
        body.dark-mode {
            background: linear-gradient(135deg, #121212, #1f1f1f);
            color: #f1f1f1;
        }

        body.dark-mode .dashboard-card {
            background: #1e1e1e;
            color: #f1f1f1;
        }

        body.dark-mode .card-text {
            color: #cfcfcf;
        }

        /* Navbar */
        .navbar {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 14px 24px;
        }

        .navbar span,
        .navbar i {
            color: #fff;
        }

        /* Header Text */
        .dashboard-title {
            font-weight: 700;
            font-size: 28px;
        }

        .dashboard-subtitle {
            color: #666;
        }

        body.dark-mode .dashboard-subtitle {
            color: #bbb;
        }

        /* Cards */
        .dashboard-card {
            border-radius: 18px;
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.12);
            transition: all 0.35s ease;
            overflow: hidden;
        }

        .dashboard-card:hover {
            transform: translateY(-12px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
        }

        .dashboard-card img {
            height: 180px;
            object-fit: contain;
            padding: 18px;
        }

        .card-body {
            text-align: center;
            padding-bottom: 25px;
        }

        /* Buttons */
        .btn-custom {
            border-radius: 30px;
            padding: 10px 22px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .dashboard-section {
            margin-top: 95px;
        }

        /* Floating AI Support Button */
#aiSupportBtn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border-radius: 50px;
  padding: 10px 16px;
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  z-index: 9999;
}

#aiSupportBtn img {
  width: 28px;
  height: 28px;
}

#aiSupportBtn span {
  font-weight: 600;
  font-size: 14px;
}

    </style>
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar fixed-top">
        <div class="container-fluid d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
                <img src="pics/Navbarlogo-2.png" width="80" height="65">
                <span class="ms-3">Hello, <span id="ss"></span></span>
            </div>

            <!-- Dark Mode Toggle -->
            <button class="btn btn-outline-light rounded-circle" id="themeToggle">
                <i class="bi bi-moon-stars" id="themeIcon"></i>
            </button>
        </div>
    </nav>

    <!-- Dashboard -->
    <div class="container dashboard-section">

        <!-- Welcome Text -->
        <div class="text-center mb-5">
            <h1 class="dashboard-title">Welcome to Needy Dashboard</h1>
            <p class="dashboard-subtitle">Access your profile and find donated medicines easily</p>
        </div>

        <div class="row justify-content-center g-4">

            <!-- Profile -->
            <div class="col-md-4">
                <div class="card dashboard-card">
                    <img src="pics/needy profile.gif">
                    <div class="card-body">
                        <h5 class="card-title">My Profile</h5>
                        <p class="card-text">View and update your personal details</p>
                        <a href="profile-needy.html" class="btn btn-primary btn-custom">
                            <i class="bi bi-person-circle"></i> Profile
                        </a>
                    </div>
                </div>
            </div>

            <!-- Find Medicine -->
            <div class="col-md-4">
                <div class="card dashboard-card">
                    <img src="pics/donor-medicine.png">
                    <div class="card-body">
                        <h5 class="card-title">Find Medicine</h5>
                        <p class="card-text">Search medicines donated by donors</p>
                        <a href="finder-med.html" class="btn btn-success btn-custom">
                            <i class="bi bi-search"></i> Find Medicine
                        </a>
                    </div>
                </div>
            </div>

            <!-- Logout -->
            <div class="col-md-4">
                <div class="card dashboard-card">
                    <img src="pics/logout (4).png">
                    <div class="card-body">
                        <h5 class="card-title">Logout</h5>
                        <p class="card-text">Safely exit from your account</p>
                        <a href="#" id="logout" class="btn btn-danger btn-custom">
                            <i class="bi bi-box-arrow-right"></i> Logout
                        </a>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <!-- chatbot -->

    <div id="chatBox"
     style="display:none;position:fixed;bottom:90px;right:20px;
            width:300px;background:white;border-radius:12px;
            box-shadow:0 10px 30px rgba(0,0,0,0.2);">

  <div style="background:#0d6efd;color:white;padding:10px;
              border-radius:12px 12px 0 0;">
    HelpRX Assistant
  </div>

  <div id="chatMessages"
       style="height:220px;overflow:auto;padding:10px;font-size:14px;">
  </div>

  <div style="display:flex;padding:10px;">
    <input id="userMsg"
           class="form-control"
           placeholder="Ask something..."
           style="font-size:14px;">
    <button class="btn btn-primary ms-2"
            onclick="sendMsgg()">Send</button>
  </div>
</div>



<!-- AI chatbot button -->
<button id="chatToggle"
        style="position:fixed;bottom:20px;right:20px;
               width:60px;height:60px;border-radius:50%;
               background:#0d6efd;color:white;border:none;
               font-size:24px;">
  ðŸ’¬
</button>




 <script>
        $(document).ready(function () {

            // Logout
            $("#logout").click(function () {
                localStorage.removeItem("activeKuch");
                location.href = "index.html";
            });

            // Set Active User
            function setActiveUser() {
                if (localStorage.getItem("activeKuch") == undefined) {
                    location.href = "index.html";
                    return;
                }
                let au = localStorage.getItem("activeKuch");
                $("#ss").html(au);
            }
            setActiveUser();

            // Dark mode toggle
            if (localStorage.getItem("theme") === "dark") {
                $("body").addClass("dark-mode");
                $("#themeIcon").removeClass("bi-moon-stars").addClass("bi-sun");
            }

            $("#themeToggle").click(function () {
                $("body").toggleClass("dark-mode");
                let theme = $("body").hasClass("dark-mode") ? "dark" : "light";
                localStorage.setItem("theme", theme);
                $("#themeIcon").toggleClass("bi-moon-stars bi-sun");
            });

        });


        $("#chatToggle").click(function(){
  $("#chatBox").toggle();
});

function sendMsgg() {
  let msg = $("#userMsg").val();
  if(msg.trim()=="") return;

  $("#chatMessages").append(`<div><b>You:</b> ${msg}</div>`);

  $.post("/chatbot-needy", { message: msg }, function(res){
    $("#chatMessages").append(
      `<div class="mt-1 text-primary">
        <b>Bot:</b> ${res.reply}
      </div>`
    );
  });

  $("#userMsg").val("");
}

    </script>

    

</body>

</html>
